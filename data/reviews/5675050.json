{
	"description": "net/http: make strace test more robust\n\nApparently some distros don't let you ptrace attach\nto your own existing processes.\n\nRun strace on the child directly, instead, which\nreportedly is more often allowed, and makes the\ncode simpler too.",
	"cc": [
		"golang-dev@googlegroups.com",
		"n13m3y3r@gmail.com"
	],
	"reviewers": [
		"untheoretic@googlemail.com",
		"mpimenov@google.com"
	],
	"messages": [
		{
			"sender": "n13m3y3r@gmail.com",
			"recipients": [
				"bradfitz@golang.org",
				"golang-dev@googlegroups.com",
				"n13m3y3r@gmail.com",
				"golang-dev@googlegroups.com",
				"reply@codereview-hr.appspotmail.com"
			],
			"text": "LGTM, thanks.",
			"disapproval": false,
			"date": "2012-02-14 23:52:20.719348",
			"approval": true
		},
		{
			"sender": "bradfitz@golang.org",
			"recipients": [
				"bradfitz@golang.org",
				"golang-dev@googlegroups.com",
				"n13m3y3r@gmail.com",
				"reply@codereview-hr.appspotmail.com"
			],
			"text": "*** Submitted as http://code.google.com/p/go/source/detail?r=4c81fd5c6395 ***\n\nnet/http: make strace test more robust\n\nApparently some distros don't let you ptrace attach\nto your own existing processes.\n\nRun strace on the child directly, instead, which\nreportedly is more often allowed, and makes the\ncode simpler too.\n\nR=golang-dev, n13m3y3r\nCC=golang-dev\nhttp://codereview.appspot.com/5675050",
			"disapproval": false,
			"date": "2012-02-15 00:05:56.908392",
			"approval": false
		},
		{
			"sender": "bradfitz@golang.org",
			"recipients": [
				"reply@codereview-hr.appspotmail.com"
			],
			"text": "This trace was very helpful, thanks!\n\nFix out for review here:\nhttp://codereview.appspot.com/5674054\n\n\nOn Tue, Feb 14, 2012 at 5:21 PM, mc <untheoretic@googlemail.com> wrote:\n\n> I just saw this, it doesn't seem to be reproducible:\n>\n> ...\n> ok net 0.855s\n> --- FAIL: TestLinuxSendfile (0.05 seconds)\n> fs_test.go:415: no sendfile system call found in:\n>\n>\n> execve(\"/tmp/go-build078447519/net/http/_test/http.test\",\n> [\"/tmp/go-build078447519/net/http/\"...,\n> \"-test.run=TestLinuxSendfileChild\"], [/* 28 vars */]) = 0\n> brk(0) = 0x37d5000\n> access(\"/etc/ld.so.nohwcap\", F_OK) = -1 ENOENT (No such file or directory)\n> mmap(NULL, 8192, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) =\n> 0x7ff0f0b32000\n> access(\"/etc/ld.so.preload\", R_OK) = -1 ENOENT (No such file or directory)\n> open(\"/etc/ld.so.cache\", O_RDONLY) = 4\n> fstat(4, {st_mode=S_IFREG|0644, st_size=89427, ...}) = 0\n> mmap(NULL, 89427, PROT_READ, MAP_PRIVATE, 4, 0) = 0x7ff0f0b1c000\n> close(4) = 0\n> access(\"/etc/ld.so.nohwcap\", F_OK) = -1 ENOENT (No such file or directory)\n> open(\"/lib/x86_64-linux-gnu/libpthread.so.0\", O_RDONLY) = 4\n> read(4, \"\\177ELF\\2\\1\\1\\0\\0\\0\\0\\0\\0\\0\\0\\0\\3\\0>\\0\\1\\0\\0\\0Pl\\0\\0\\0\\0\\0\\0\"...,\n> 832) = 832\n> fstat(4, {st_mode=S_IFREG|0755, st_size=135500, ...}) = 0\n> mmap(NULL, 2212920, PROT_READ|PROT_EXEC, MAP_PRIVATE|MAP_DENYWRITE, 4, 0)\n> = 0x7ff0f06f7000\n> mprotect(0x7ff0f070f000, 2093056, PROT_NONE) = 0\n> mmap(0x7ff0f090e000, 8192, PROT_READ|PROT_WRITE,\n> MAP_PRIVATE|MAP_FIXED|MAP_DENYWRITE, 4, 0x17000) = 0x7ff0f090e000\n> mmap(0x7ff0f0910000, 13368, PROT_READ|PROT_WRITE,\n> MAP_PRIVATE|MAP_FIXED|MAP_ANONYMOUS, -1, 0) = 0x7ff0f0910000\n> close(4) = 0\n> access(\"/etc/ld.so.nohwcap\", F_OK) = -1 ENOENT (No such file or directory)\n> open(\"/lib/x86_64-linux-gnu/libc.so.6\", O_RDONLY) = 4\n> read(4, \"\\177ELF\\2\\1\\1\\0\\0\\0\\0\\0\\0\\0\\0\\0\\3\\0>\\0\\1\\0\\0\\0\n> \\24\\2\\0\\0\\0\\0\\0\"..., 832) = 832\n> fstat(4, {st_mode=S_IFREG|0755, st_size=1677624, ...}) = 0\n> mmap(NULL, 3793768, PROT_READ|PROT_EXEC, MAP_PRIVATE|MAP_DENYWRITE, 4, 0)\n> = 0x7ff0f0358000\n> mprotect(0x7ff0f04ed000, 2093056, PROT_NONE) = 0\n> mmap(0x7ff0f06ec000, 20480, PROT_READ|PROT_WRITE,\n> MAP_PRIVATE|MAP_FIXED|MAP_DENYWRITE, 4, 0x194000) = 0x7ff0f06ec000\n> mmap(0x7ff0f06f1000, 21352, PROT_READ|PROT_WRITE,\n> MAP_PRIVATE|MAP_FIXED|MAP_ANONYMOUS, -1, 0) = 0x7ff0f06f1000\n> close(4) = 0\n> mmap(NULL, 4096, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) =\n> 0x7ff0f0b1b000\n> mmap(NULL, 8192, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) =\n> 0x7ff0f0b19000\n> arch_prctl(ARCH_SET_FS, 0x7ff0f0b19720) = 0\n> mprotect(0x7ff0f06ec000, 16384, PROT_READ) = 0\n> mprotect(0x7ff0f090e000, 4096, PROT_READ) = 0\n> mprotect(0x7ff0f0b34000, 4096, PROT_READ) = 0\n> munmap(0x7ff0f0b1c000, 89427) = 0\n> set_tid_address(0x7ff0f0b199f0) = 18947\n> set_robust_list(0x7ff0f0b19a00, 0x18) = 0\n> futex(0x7fff1c572f5c, FUTEX_WAKE_PRIVATE, 1) = 0\n> futex(0x7fff1c572f5c, FUTEX_WAIT_BITSET_PRIVATE|FUTEX_CLOCK_REALTIME, 1,\n> NULL, 7ff0f0b19720) = -1 EAGAIN (Resource temporarily unavailable)\n> rt_sigaction(SIGRTMIN, {0x7ff0f06fd6c0, [], SA_RESTORER|SA_SIGINFO,\n> 0x7ff0f0707060}, NULL, 8) = 0\n> rt_sigaction(SIGRT_1, {0x7ff0f06fd750, [],\n> SA_RESTORER|SA_RESTART|SA_SIGINFO, 0x7ff0f0707060}, NULL, 8) = 0\n> rt_sigprocmask(SIG_UNBLOCK, [RTMIN RT_1], NULL, 8) = 0\n> getrlimit(RLIMIT_STACK, {rlim_cur=8192*1024, rlim_max=RLIM_INFINITY}) = 0\n> rt_sigaction(SIGHUP, {0x418ddf, ~[],\n> SA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x418e32}, NULL, 8) = 0\n> rt_sigaction(SIGINT, {0x418ddf, ~[],\n> SA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x418e32}, NULL, 8) = 0\n> rt_sigaction(SIGQUIT, {0x418ddf, ~[],\n> SA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x418e32}, NULL, 8) = 0\n> rt_sigaction(SIGILL, {0x418ddf, ~[],\n> SA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x418e32}, NULL, 8) = 0\n> rt_sigaction(SIGTRAP, {0x418ddf, ~[],\n> SA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x418e32}, NULL, 8) = 0\n> rt_sigaction(SIGABRT, {0x418ddf, ~[],\n> SA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x418e32}, NULL, 8) = 0\n> rt_sigaction(SIGBUS, {0x418ddf, ~[],\n> SA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x418e32}, NULL, 8) = 0\n> rt_sigaction(SIGFPE, {0x418ddf, ~[],\n> SA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x418e32}, NULL, 8) = 0\n> rt_sigaction(SIGUSR1, {0x418ddf, ~[],\n> SA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x418e32}, NULL, 8) = 0\n> rt_sigaction(SIGSEGV, {0x418ddf, ~[],\n> SA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x418e32}, NULL, 8) = 0\n> rt_sigaction(SIGUSR2, {0x418ddf, ~[],\n> SA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x418e32}, NULL, 8) = 0\n> rt_sigaction(SIGPIPE, {0x418ddf, ~[],\n> SA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x418e32}, NULL, 8) = 0\n> rt_sigaction(SIGALRM, {0x418ddf, ~[],\n> SA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x418e32}, NULL, 8) = 0\n> rt_sigaction(SIGTERM, {0x418ddf, ~[],\n> SA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x418e32}, NULL, 8) = 0\n> rt_sigaction(SIGSTKFLT, {0x418ddf, ~[],\n> SA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x418e32}, NULL, 8) = 0\n> rt_sigaction(SIGCHLD, {0x418ddf, ~[],\n> SA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x418e32}, NULL, 8) = 0\n> rt_sigaction(SIGTSTP, {0x418ddf, ~[],\n> SA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x418e32}, NULL, 8) = 0\n> rt_sigaction(SIGTTIN, {0x418ddf, ~[],\n> SA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x418e32}, NULL, 8) = 0\n> rt_sigaction(SIGTTOU, {0x418ddf, ~[],\n> SA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x418e32}, NULL, 8) = 0\n> rt_sigaction(SIGURG, {0x418ddf, ~[],\n> SA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x418e32}, NULL, 8) = 0\n> rt_sigaction(SIGXCPU, {0x418ddf, ~[],\n> SA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x418e32}, NULL, 8) = 0\n> rt_sigaction(SIGXFSZ, {0x418ddf, ~[],\n> SA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x418e32}, NULL, 8) = 0\n> rt_sigaction(SIGVTALRM, {0x418ddf, ~[],\n> SA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x418e32}, NULL, 8) = 0\n> rt_sigaction(SIGPROF, {0x418ddf, ~[],\n> SA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x418e32}, NULL, 8) = 0\n> rt_sigaction(SIGWINCH, {0x418ddf, ~[],\n> SA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x418e32}, NULL, 8) = 0\n> rt_sigaction(SIGIO, {0x418ddf, ~[],\n> SA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x418e32}, NULL, 8) = 0\n> rt_sigaction(SIGPWR, {0x418ddf, ~[],\n> SA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x418e32}, NULL, 8) = 0\n> rt_sigaction(SIGSYS, {0x418ddf, ~[],\n> SA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x418e32}, NULL, 8) = 0\n> rt_sigaction(SIGRTMIN, {0x418ddf, ~[],\n> SA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x418e32}, NULL, 8) = 0\n> rt_sigaction(SIGRT_1, {0x418ddf, ~[],\n> SA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x418e32}, NULL, 8) = 0\n> rt_sigaction(SIGRT_2, {0x418ddf, ~[],\n> SA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x418e32}, NULL, 8) = 0\n> rt_sigaction(SIGRT_3, {0x418ddf, ~[],\n> SA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x418e32}, NULL, 8) = 0\n> rt_sigaction(SIGRT_4, {0x418ddf, ~[],\n> SA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x418e32}, NULL, 8) = 0\n> rt_sigaction(SIGRT_5, {0x418ddf, ~[],\n> SA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x418e32}, NULL, 8) = 0\n> rt_sigaction(SIGRT_6, {0x418ddf, ~[],\n> SA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x418e32}, NULL, 8) = 0\n> rt_sigaction(SIGRT_7, {0x418ddf, ~[],\n> SA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x418e32}, NULL, 8) = 0\n> rt_sigaction(SIGRT_8, {0x418ddf, ~[],\n> SA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x418e32}, NULL, 8) = 0\n> rt_sigaction(SIGRT_9, {0x418ddf, ~[],\n> SA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x418e32}, NULL, 8) = 0\n> rt_sigaction(SIGRT_10, {0x418ddf, ~[],\n> SA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x418e32}, NULL, 8) = 0\n> rt_sigaction(SIGRT_11, {0x418ddf, ~[],\n> SA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x418e32}, NULL, 8) = 0\n> rt_sigaction(SIGRT_12, {0x418ddf, ~[],\n> SA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x418e32}, NULL, 8) = 0\n> rt_sigaction(SIGRT_13, {0x418ddf, ~[],\n> SA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x418e32}, NULL, 8) = 0\n> rt_sigaction(SIGRT_14, {0x418ddf, ~[],\n> SA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x418e32}, NULL, 8) = 0\n> rt_sigaction(SIGRT_15, {0x418ddf, ~[],\n> SA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x418e32}, NULL, 8) = 0\n> rt_sigaction(SIGRT_16, {0x418ddf, ~[],\n> SA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x418e32}, NULL, 8) = 0\n> rt_sigaction(SIGRT_17, {0x418ddf, ~[],\n> SA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x418e32}, NULL, 8) = 0\n> rt_sigaction(SIGRT_18, {0x418ddf, ~[],\n> SA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x418e32}, NULL, 8) = 0\n> rt_sigaction(SIGRT_19, {0x418ddf, ~[],\n> SA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x418e32}, NULL, 8) = 0\n> rt_sigaction(SIGRT_20, {0x418ddf, ~[],\n> SA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x418e32}, NULL, 8) = 0\n> rt_sigaction(SIGRT_21, {0x418ddf, ~[],\n> SA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x418e32}, NULL, 8) = 0\n> rt_sigaction(SIGRT_22, {0x418ddf, ~[],\n> SA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x418e32}, NULL, 8) = 0\n> rt_sigaction(SIGRT_23, {0x418ddf, ~[],\n> SA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x418e32}, NULL, 8) = 0\n> rt_sigaction(SIGRT_24, {0x418ddf, ~[],\n> SA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x418e32}, NULL, 8) = 0\n> rt_sigaction(SIGRT_25, {0x418ddf, ~[],\n> SA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x418e32}, NULL, 8) = 0\n> rt_sigaction(SIGRT_26, {0x418ddf, ~[],\n> SA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x418e32}, NULL, 8) = 0\n> rt_sigaction(SIGRT_27, {0x418ddf, ~[],\n> SA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x418e32}, NULL, 8) = 0\n> rt_sigaction(SIGRT_28, {0x418ddf, ~[],\n> SA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x418e32}, NULL, 8) = 0\n> rt_sigaction(SIGRT_29, {0x418ddf, ~[],\n> SA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x418e32}, NULL, 8) = 0\n> rt_sigaction(SIGRT_30, {0x418ddf, ~[],\n> SA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x418e32}, NULL, 8) = 0\n> rt_sigaction(SIGRT_31, {0x418ddf, ~[],\n> SA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x418e32}, NULL, 8) = 0\n> rt_sigaction(SIGRT_32, {0x418ddf, ~[],\n> SA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x418e32}, NULL, 8) = 0\n> open(\"/proc/stat\", O_RDONLY|O_CLOEXEC) = 4\n> read(4, \"cpu 26751446 35451 8248792 2083\"..., 252) = 252\n> read(4, \"62474 84871592 0 0 0 25488807 0 \"..., 252) = 252\n> read(4, \" 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0\"..., 252) = 252\n> read(4, \" 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0\"..., 252) = 252\n> read(4, \" 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0\"..., 252) = 252\n> read(4, \" 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0\"..., 252) = 252\n> read(4, \" 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0\"..., 252) = 252\n> read(4, \"\\nprocs_blocked 0\\nsoftirq 3692063\"..., 252) = 108\n> read(4, \"\", 252) = 0\n> close(4) = 0\n> mmap(0xf800000000, 65536, PROT_NONE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) =\n> 0xf800000000\n> munmap(0xf800000000, 65536) = 0\n> mmap(NULL, 131072, PROT_READ|PROT_WRITE|PROT_EXEC,\n> MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0x7ff0f0af9000\n> mmap(0xf840000000, 1048576, PROT_READ|PROT_WRITE|PROT_EXEC,\n> MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0xf840000000\n> mmap(0xf83fff0000, 65536, PROT_READ|PROT_WRITE|PROT_EXEC,\n> MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0xf83fff0000\n> mmap(NULL, 131072, PROT_READ|PROT_WRITE|PROT_EXEC,\n> MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0x7ff0f0ad9000\n> mmap(NULL, 131072, PROT_READ|PROT_WRITE|PROT_EXEC,\n> MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0x7ff0f0ab9000\n> sigaltstack({ss_sp=0xf840076000, ss_flags=0, ss_size=32768}, NULL) = 0\n> mmap(NULL, 1048576, PROT_READ|PROT_WRITE|PROT_EXEC,\n> MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0x7ff0f09b9000\n> socket(PF_INET6, SOCK_STREAM, IPPROTO_TCP) = 4\n> bind(4, {sa_family=AF_INET6, sin6_port=htons(0), inet_pton(AF_INET6,\n> \"::1\", &sin6_addr), sin6_flowinfo=0, sin6_scope_id=0}, 28) = 0\n> socket(PF_INET6, SOCK_STREAM, IPPROTO_TCP) = 5\n> bind(5, {sa_family=AF_INET6, sin6_port=htons(0), inet_pton(AF_INET6,\n> \"::ffff:127.0.0.1\", &sin6_addr), sin6_flowinfo=0, sin6_scope_id=0}, 28) = 0\n> close(5) = 0\n> close(4) = 0\n> open(\"/proc/sys/net/core/somaxconn\", O_RDONLY|O_CLOEXEC) = 4\n> read(4, \"128\\n\", 1024) = 4\n> read(4, \"\", 1020) = 0\n> close(4) = 0\n> dup(3) = 4\n> getsockopt(4, SOL_SOCKET, SO_TYPE, [1], [4]) = 0\n> getsockname(4, {sa_family=AF_INET, sin_port=htons(51826),\n> sin_addr=inet_addr(\"127.0.0.1\")}, [16]) = 0\n> getpeername(4, 0xf840000850, [112]) = -1 ENOTCONN (Transport endpoint is\n> not connected)\n> pipe([5, 6]) = 0\n> fcntl(5, F_SETFD, FD_CLOEXEC) = 0\n> fcntl(6, F_SETFD, FD_CLOEXEC) = 0\n> fcntl(5, F_GETFL) = 0 (flags O_RDONLY)\n> fcntl(5, F_SETFL, O_RDONLY|O_NONBLOCK) = 0\n> fcntl(6, F_GETFL) = 0x1 (flags O_WRONLY)\n> fcntl(6, F_SETFL, O_WRONLY|O_NONBLOCK) = 0\n> epoll_create1(O_CLOEXEC) = 7\n> epoll_ctl(7, EPOLL_CTL_ADD, 5, {EPOLLIN|0x2000, {u32=5, u64=5}}) = 0\n> brk(0) = 0x37d5000\n> brk(0x37f6000) = 0x37f6000\n> mmap(NULL, 8392704, PROT_READ|PROT_WRITE,\n> MAP_PRIVATE|MAP_ANONYMOUS|MAP_STACK, -1, 0) = 0x7ff0efb57000\n> mprotect(0x7ff0efb57000, 4096, PROT_NONE) = 0\n> clone(Process 18948 attached\n> child_stack=0x7ff0f0356fd0,\n> flags=CLONE_VM|CLONE_FS|CLONE_FILES|CLONE_SIGHAND|CLONE_THREAD|CLONE_SYSVSEM|CLONE_SETTLS|CLONE_PARENT_SETTID|CLONE_CHILD_CLEARTID,\n> parent_tidptr=0x7ff0f03579d0, tls=0x7ff0f0357700,\n> child_tidptr=0x7ff0f03579d0) = 18948\n> [pid 18947] fcntl(4, F_GETFL) = 0x2 (flags O_RDWR)\n> [pid 18947] futex(0x7a3130, FUTEX_WAIT, 0, NULL <unfinished ...>\n> [pid 18948] set_robust_list(0x7ff0f03579e0, 0x18) = 0\n> [pid 18948] sigaltstack({ss_sp=0xf8400ae000, ss_flags=0, ss_size=32768},\n> NULL) = 0\n> [pid 18948] futex(0x7a3130, FUTEX_WAKE, 1 <unfinished ...>\n> [pid 18947] <... futex resumed> ) = 0\n> [pid 18947] fcntl(4, F_SETFL, O_RDWR|O_NONBLOCK) = 0\n> [pid 18947] accept(4, {sa_family=AF_INET, sin_port=htons(55184),\n> sin_addr=inet_addr(\"127.0.0.1\")}, [16]) = 8\n> [pid 18947] fcntl(8, F_SETFD, FD_CLOEXEC) = 0\n> [pid 18947] fcntl(8, F_GETFL) = 0x2 (flags O_RDWR)\n> [pid 18947] fcntl(8, F_SETFL, O_RDWR|O_NONBLOCK) = 0\n> [pid 18947] getsockname(8, {sa_family=AF_INET, sin_port=htons(51826),\n> sin_addr=inet_addr(\"127.0.0.1\")}, [16]) = 0\n> [pid 18947] setsockopt(8, SOL_TCP, TCP_NODELAY, [1], 4) = 0\n> [pid 18947] mmap(NULL, 8392704, PROT_READ|PROT_WRITE,\n> MAP_PRIVATE|MAP_ANONYMOUS|MAP_STACK, -1, 0) = 0x7ff0ef356000\n> [pid 18947] mprotect(0x7ff0ef356000, 4096, PROT_NONE) = 0\n> [pid 18947] clone(Process 18949 attached\n> child_stack=0x7ff0efb55fd0,\n> flags=CLONE_VM|CLONE_FS|CLONE_FILES|CLONE_SIGHAND|CLONE_THREAD|CLONE_SYSVSEM|CLONE_SETTLS|CLONE_PARENT_SETTID|CLONE_CHILD_CLEARTID,\n> parent_tidptr=0x7ff0efb569d0, tls=0x7ff0efb56700,\n> child_tidptr=0x7ff0efb569d0) = 18949\n> [pid 18947] accept(4, 0xf8400009a0, [112]) = -1 EAGAIN (Resource\n> temporarily unavailable)\n> [pid 18947] futex(0x7a3130, FUTEX_WAIT, 0, NULL <unfinished ...>\n> [pid 18948] <... futex resumed> ) = 1\n> [pid 18948] epoll_wait(7, <unfinished ...>\n> [pid 18949] set_robust_list(0x7ff0efb569e0, 0x18) = 0\n> [pid 18949] sigaltstack({ss_sp=0xf8400bc000, ss_flags=0, ss_size=32768},\n> NULL) = 0\n> [pid 18949] futex(0x7a3130, FUTEX_WAKE, 1 <unfinished ...>\n> [pid 18947] <... futex resumed> ) = 0\n> [pid 18947] epoll_ctl(7, EPOLL_CTL_ADD, 4, {EPOLLIN|EPOLLONESHOT|0x2000,\n> {u32=4, u64=4}}) = 0\n> [pid 18947] futex(0x7a3130, FUTEX_WAIT, 0, NULL <unfinished ...>\n> [pid 18949] <... futex resumed> ) = 1\n> [pid 18949] read(8, \"GET / HTTP/1.1\\r\\nHost: 127.0.0.1:\"..., 4096) = 93\n> [pid 18949] open(\"testdata\", O_RDONLY|O_CLOEXEC) = 9\n> [pid 18949] fstat(9, {st_mode=S_IFDIR|0775, st_size=136, ...}) = 0\n> [pid 18949] open(\"testdata/index.html\", O_RDONLY|O_CLOEXEC) = 10\n> [pid 18949] fstat(10, {st_mode=S_IFREG|0664, st_size=22, ...}) = 0\n> [pid 18949] open(\"/etc/mime.types\", O_RDONLY|O_CLOEXEC) = 11\n> [pid 18949] read(11, \"################################\"..., 4096) = 4096\n> [pid 18949] read(11, \"\\napplication/whoispp-response\\nap\"..., 4071) = 4071\n> [pid 18949] read(11, \"lication/vnd.ms-asf\\napplication/\"..., 4093) = 4093\n> [pid 18949] read(11, \"ml.draw.template\\t\\t\\t\\t\\t\\tstd\\napplic\"..., 4075) =\n> 4075\n> [pid 18949] mmap(0xf840100000, 1048576, PROT_READ|PROT_WRITE|PROT_EXEC,\n> MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0xf840100000\n> [pid 18949] mmap(0xf83ffe0000, 65536, PROT_READ|PROT_WRITE|PROT_EXEC,\n> MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0xf83ffe0000\n> [pid 18949] read(11, \"lab\\t\\t\\t\\tsci sce\\napplication/x-sh\\t\"..., 4079) =\n> 4079\n> [pid 18949] read(11, \"r\\nimage/x-coreldrawpattern\\t\\t\\tpat\"..., 4073) =\n> 3544\n> [pid 18949] read(11, \"\", 4096) = 0\n> [pid 18949] close(11) = 0\n> [pid 18949] open(\"/etc/apache2/mime.types\", O_RDONLY|O_CLOEXEC) = -1\n> ENOENT (No such file or directory)\n> [pid 18949] open(\"/etc/apache/mime.types\", O_RDONLY|O_CLOEXEC) = -1 ENOENT\n> (No such file or directory)\n> [pid 18949] write(8, \"HTTP/1.1 200 OK\\r\\nAccept-Ranges: \"..., 184\n> <unfinished ...>\n> [pid 18948] <... epoll_wait resumed> {{EPOLLIN, {u32=4, u64=4}}}, 10, -1)\n> = 1\n> [pid 18948] epoll_ctl(7, EPOLL_CTL_DEL, 4, NULL) = 0\n> [pid 18948] futex(0x7a3130, FUTEX_WAKE, 1) = 1\n> [pid 18947] <... futex resumed> ) = 0\n> [pid 18948] epoll_wait(7, <unfinished ...>\n> [pid 18947] accept(4, {sa_family=AF_INET, sin_port=htons(55185),\n> sin_addr=inet_addr(\"127.0.0.1\")}, [16]) = 11\n> [pid 18947] fcntl(11, F_SETFD, FD_CLOEXEC) = 0\n> [pid 18947] fcntl(11, F_GETFL) = 0x2 (flags O_RDWR)\n> [pid 18947] fcntl(11, F_SETFL, O_RDWR|O_NONBLOCK) = 0\n> [pid 18947] getsockname(11, {sa_family=AF_INET, sin_port=htons(51826),\n> sin_addr=inet_addr(\"127.0.0.1\")}, [16]) = 0\n> [pid 18947] setsockopt(11, SOL_TCP, TCP_NODELAY, [1], 4) = 0\n> [pid 18947] mmap(NULL, 4096, PROT_READ|PROT_WRITE|PROT_EXEC,\n> MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0x7ff0f0b31000\n> [pid 18947] mmap(NULL, 8392704, PROT_READ|PROT_WRITE,\n> MAP_PRIVATE|MAP_ANONYMOUS|MAP_STACK, -1, 0) = 0x7ff0eeb55000\n> [pid 18947] mprotect(0x7ff0eeb55000, 4096, PROT_NONE) = 0\n> [pid 18947] clone(Process 18950 attached\n> child_stack=0x7ff0ef354fd0,\n> flags=CLONE_VM|CLONE_FS|CLONE_FILES|CLONE_SIGHAND|CLONE_THREAD|CLONE_SYSVSEM|CLONE_SETTLS|CLONE_PARENT_SETTID|CLONE_CHILD_CLEARTID,\n> parent_tidptr=0x7ff0ef3559d0, tls=0x7ff0ef355700,\n> child_tidptr=0x7ff0ef3559d0) = 18950\n> [pid 18947] close(3) = 0\n> [pid 18947] futex(0x7a3130, FUTEX_WAIT, 0, NULL <unfinished ...>\n> [pid 18949] <... write resumed> ) = 184\n> [pid 18949] futex(0xf8400ab368, FUTEX_WAIT, 0, NULL <unfinished ...>\n> [pid 18950] set_robust_list(0x7ff0ef3559e0, 0x18) = 0\n> [pid 18950] sigaltstack({ss_sp=0xf8400fa000, ss_flags=0, ss_size=32768},\n> NULL) = 0\n> [pid 18950] mmap(NULL, 131072, PROT_READ|PROT_WRITE|PROT_EXEC,\n> MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0x7ff0f0999000\n> [pid 18950] futex(0xf8400ab368, FUTEX_WAKE, 1 <unfinished ...>\n> [pid 18949] <... futex resumed> ) = 0\n> [pid 18949] futex(0x7a3130, FUTEX_WAKE, 1 <unfinished ...>\n> [pid 18947] <... futex resumed> ) = 0\n> [pid 18947] read(11, \"GET /quit HTTP/1.1\\r\\nHost: 127.0.\"..., 4096) = 97\n> [pid 18947] exit_group(0) = ?\n> FAIL\n> FAIL net/http 2.837s\n> ok net/http/cgi 0.324s\n> ok net/http/fcgi 0.012s\n>\n",
			"disapproval": false,
			"date": "2012-02-15 11:33:24.652865",
			"approval": false
		},
		{
			"sender": "untheoretic@googlemail.com",
			"recipients": [
				"reply@codereview-hr.appspotmail.com"
			],
			"text": "now I've got (tip):\n\n[pid  1183] <... futex resumed> )       = 0\n[pid  1183] futex(0x7a4130, FUTEX_WAKE, 1 <unfinished ...>\n[pid  1181] <... futex resumed> )       = 0\n[pid  1181] read(11, \"GET /quit HTTP/1.1\\r\\nHost: 127.0.\"..., 4096) = 97\n[pid  1181] exit_group(0)               = ?\nEpoll unexpected fd=73\npollServer: unexpected wakeup for fd=73 mode=r\nFAIL\nFAIL net/http 3.055s\nok   net/http/cgi 0.647s\n\n",
			"disapproval": false,
			"date": "2012-02-15 08:40:34.197493",
			"approval": false
		},
		{
			"sender": "mpimenov@google.com",
			"recipients": [
				"reply@codereview-hr.appspotmail.com"
			],
			"text": "It occasionally fails for me with\n\nfs_test.go:415: no sendfile system call found in:\nexecve(\"/tmp/go-build088733628/net/http/_test/http.test\",\n[\"/tmp/go-build088733628/net/http/\"...,\n\"-test.run=TestLinuxSendfileChild\"], [/* 57 vars */]) = 0\n<...>\n\n\nOn Wed, Feb 15, 2012 at 12:40 PM, mc <untheoretic@googlemail.com> wrote:\n\n> now I've got (tip):\n>\n> [pid  1183] <... futex resumed> )       = 0\n> [pid  1183] futex(0x7a4130, FUTEX_WAKE, 1 <unfinished ...>\n> [pid  1181] <... futex resumed> )       = 0\n> [pid  1181] read(11, \"GET /quit HTTP/1.1\\r\\nHost: 127.0.\"..., 4096) = 97\n> [pid  1181] exit_group(0)               = ?\n> Epoll unexpected fd=73\n> pollServer: unexpected wakeup for fd=73 mode=r\n> FAIL\n> FAIL net/http 3.055s\n> ok   net/http/cgi 0.647s\n>\n>\n",
			"disapproval": false,
			"date": "2012-02-15 08:42:20.753159",
			"approval": false
		},
		{
			"sender": "untheoretic@googlemail.com",
			"recipients": [
				"reply@codereview-hr.appspotmail.com"
			],
			"text": "I just saw this, it doesn't seem to be reproducible:\n\n...\nok net 0.855s\n--- FAIL: TestLinuxSendfile (0.05 seconds)\nfs_test.go:415: no sendfile system call found in:\n\n\nexecve(\"/tmp/go-build078447519/net/http/_test/http.test\", \n[\"/tmp/go-build078447519/net/http/\"..., \n\"-test.run=TestLinuxSendfileChild\"], [/* 28 vars */]) = 0\nbrk(0) = 0x37d5000\naccess(\"/etc/ld.so.nohwcap\", F_OK) = -1 ENOENT (No such file or directory)\nmmap(NULL, 8192, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = \n0x7ff0f0b32000\naccess(\"/etc/ld.so.preload\", R_OK) = -1 ENOENT (No such file or directory)\nopen(\"/etc/ld.so.cache\", O_RDONLY) = 4\nfstat(4, {st_mode=S_IFREG|0644, st_size=89427, ...}) = 0\nmmap(NULL, 89427, PROT_READ, MAP_PRIVATE, 4, 0) = 0x7ff0f0b1c000\nclose(4) = 0\naccess(\"/etc/ld.so.nohwcap\", F_OK) = -1 ENOENT (No such file or directory)\nopen(\"/lib/x86_64-linux-gnu/libpthread.so.0\", O_RDONLY) = 4\nread(4, \"\\177ELF\\2\\1\\1\\0\\0\\0\\0\\0\\0\\0\\0\\0\\3\\0>\\0\\1\\0\\0\\0Pl\\0\\0\\0\\0\\0\\0\"..., \n832) = 832\nfstat(4, {st_mode=S_IFREG|0755, st_size=135500, ...}) = 0\nmmap(NULL, 2212920, PROT_READ|PROT_EXEC, MAP_PRIVATE|MAP_DENYWRITE, 4, 0) = \n0x7ff0f06f7000\nmprotect(0x7ff0f070f000, 2093056, PROT_NONE) = 0\nmmap(0x7ff0f090e000, 8192, PROT_READ|PROT_WRITE, \nMAP_PRIVATE|MAP_FIXED|MAP_DENYWRITE, 4, 0x17000) = 0x7ff0f090e000\nmmap(0x7ff0f0910000, 13368, PROT_READ|PROT_WRITE, \nMAP_PRIVATE|MAP_FIXED|MAP_ANONYMOUS, -1, 0) = 0x7ff0f0910000\nclose(4) = 0\naccess(\"/etc/ld.so.nohwcap\", F_OK) = -1 ENOENT (No such file or directory)\nopen(\"/lib/x86_64-linux-gnu/libc.so.6\", O_RDONLY) = 4\nread(4, \"\\177ELF\\2\\1\\1\\0\\0\\0\\0\\0\\0\\0\\0\\0\\3\\0>\\0\\1\\0\\0\\0 \n\\24\\2\\0\\0\\0\\0\\0\"..., 832) = 832\nfstat(4, {st_mode=S_IFREG|0755, st_size=1677624, ...}) = 0\nmmap(NULL, 3793768, PROT_READ|PROT_EXEC, MAP_PRIVATE|MAP_DENYWRITE, 4, 0) = \n0x7ff0f0358000\nmprotect(0x7ff0f04ed000, 2093056, PROT_NONE) = 0\nmmap(0x7ff0f06ec000, 20480, PROT_READ|PROT_WRITE, \nMAP_PRIVATE|MAP_FIXED|MAP_DENYWRITE, 4, 0x194000) = 0x7ff0f06ec000\nmmap(0x7ff0f06f1000, 21352, PROT_READ|PROT_WRITE, \nMAP_PRIVATE|MAP_FIXED|MAP_ANONYMOUS, -1, 0) = 0x7ff0f06f1000\nclose(4) = 0\nmmap(NULL, 4096, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = \n0x7ff0f0b1b000\nmmap(NULL, 8192, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = \n0x7ff0f0b19000\narch_prctl(ARCH_SET_FS, 0x7ff0f0b19720) = 0\nmprotect(0x7ff0f06ec000, 16384, PROT_READ) = 0\nmprotect(0x7ff0f090e000, 4096, PROT_READ) = 0\nmprotect(0x7ff0f0b34000, 4096, PROT_READ) = 0\nmunmap(0x7ff0f0b1c000, 89427) = 0\nset_tid_address(0x7ff0f0b199f0) = 18947\nset_robust_list(0x7ff0f0b19a00, 0x18) = 0\nfutex(0x7fff1c572f5c, FUTEX_WAKE_PRIVATE, 1) = 0\nfutex(0x7fff1c572f5c, FUTEX_WAIT_BITSET_PRIVATE|FUTEX_CLOCK_REALTIME, 1, \nNULL, 7ff0f0b19720) = -1 EAGAIN (Resource temporarily unavailable)\nrt_sigaction(SIGRTMIN, {0x7ff0f06fd6c0, [], SA_RESTORER|SA_SIGINFO, \n0x7ff0f0707060}, NULL, 8) = 0\nrt_sigaction(SIGRT_1, {0x7ff0f06fd750, [], \nSA_RESTORER|SA_RESTART|SA_SIGINFO, 0x7ff0f0707060}, NULL, 8) = 0\nrt_sigprocmask(SIG_UNBLOCK, [RTMIN RT_1], NULL, 8) = 0\ngetrlimit(RLIMIT_STACK, {rlim_cur=8192*1024, rlim_max=RLIM_INFINITY}) = 0\nrt_sigaction(SIGHUP, {0x418ddf, ~[], \nSA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x418e32}, NULL, 8) = 0\nrt_sigaction(SIGINT, {0x418ddf, ~[], \nSA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x418e32}, NULL, 8) = 0\nrt_sigaction(SIGQUIT, {0x418ddf, ~[], \nSA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x418e32}, NULL, 8) = 0\nrt_sigaction(SIGILL, {0x418ddf, ~[], \nSA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x418e32}, NULL, 8) = 0\nrt_sigaction(SIGTRAP, {0x418ddf, ~[], \nSA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x418e32}, NULL, 8) = 0\nrt_sigaction(SIGABRT, {0x418ddf, ~[], \nSA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x418e32}, NULL, 8) = 0\nrt_sigaction(SIGBUS, {0x418ddf, ~[], \nSA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x418e32}, NULL, 8) = 0\nrt_sigaction(SIGFPE, {0x418ddf, ~[], \nSA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x418e32}, NULL, 8) = 0\nrt_sigaction(SIGUSR1, {0x418ddf, ~[], \nSA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x418e32}, NULL, 8) = 0\nrt_sigaction(SIGSEGV, {0x418ddf, ~[], \nSA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x418e32}, NULL, 8) = 0\nrt_sigaction(SIGUSR2, {0x418ddf, ~[], \nSA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x418e32}, NULL, 8) = 0\nrt_sigaction(SIGPIPE, {0x418ddf, ~[], \nSA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x418e32}, NULL, 8) = 0\nrt_sigaction(SIGALRM, {0x418ddf, ~[], \nSA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x418e32}, NULL, 8) = 0\nrt_sigaction(SIGTERM, {0x418ddf, ~[], \nSA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x418e32}, NULL, 8) = 0\nrt_sigaction(SIGSTKFLT, {0x418ddf, ~[], \nSA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x418e32}, NULL, 8) = 0\nrt_sigaction(SIGCHLD, {0x418ddf, ~[], \nSA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x418e32}, NULL, 8) = 0\nrt_sigaction(SIGTSTP, {0x418ddf, ~[], \nSA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x418e32}, NULL, 8) = 0\nrt_sigaction(SIGTTIN, {0x418ddf, ~[], \nSA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x418e32}, NULL, 8) = 0\nrt_sigaction(SIGTTOU, {0x418ddf, ~[], \nSA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x418e32}, NULL, 8) = 0\nrt_sigaction(SIGURG, {0x418ddf, ~[], \nSA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x418e32}, NULL, 8) = 0\nrt_sigaction(SIGXCPU, {0x418ddf, ~[], \nSA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x418e32}, NULL, 8) = 0\nrt_sigaction(SIGXFSZ, {0x418ddf, ~[], \nSA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x418e32}, NULL, 8) = 0\nrt_sigaction(SIGVTALRM, {0x418ddf, ~[], \nSA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x418e32}, NULL, 8) = 0\nrt_sigaction(SIGPROF, {0x418ddf, ~[], \nSA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x418e32}, NULL, 8) = 0\nrt_sigaction(SIGWINCH, {0x418ddf, ~[], \nSA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x418e32}, NULL, 8) = 0\nrt_sigaction(SIGIO, {0x418ddf, ~[], \nSA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x418e32}, NULL, 8) = 0\nrt_sigaction(SIGPWR, {0x418ddf, ~[], \nSA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x418e32}, NULL, 8) = 0\nrt_sigaction(SIGSYS, {0x418ddf, ~[], \nSA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x418e32}, NULL, 8) = 0\nrt_sigaction(SIGRTMIN, {0x418ddf, ~[], \nSA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x418e32}, NULL, 8) = 0\nrt_sigaction(SIGRT_1, {0x418ddf, ~[], \nSA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x418e32}, NULL, 8) = 0\nrt_sigaction(SIGRT_2, {0x418ddf, ~[], \nSA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x418e32}, NULL, 8) = 0\nrt_sigaction(SIGRT_3, {0x418ddf, ~[], \nSA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x418e32}, NULL, 8) = 0\nrt_sigaction(SIGRT_4, {0x418ddf, ~[], \nSA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x418e32}, NULL, 8) = 0\nrt_sigaction(SIGRT_5, {0x418ddf, ~[], \nSA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x418e32}, NULL, 8) = 0\nrt_sigaction(SIGRT_6, {0x418ddf, ~[], \nSA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x418e32}, NULL, 8) = 0\nrt_sigaction(SIGRT_7, {0x418ddf, ~[], \nSA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x418e32}, NULL, 8) = 0\nrt_sigaction(SIGRT_8, {0x418ddf, ~[], \nSA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x418e32}, NULL, 8) = 0\nrt_sigaction(SIGRT_9, {0x418ddf, ~[], \nSA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x418e32}, NULL, 8) = 0\nrt_sigaction(SIGRT_10, {0x418ddf, ~[], \nSA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x418e32}, NULL, 8) = 0\nrt_sigaction(SIGRT_11, {0x418ddf, ~[], \nSA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x418e32}, NULL, 8) = 0\nrt_sigaction(SIGRT_12, {0x418ddf, ~[], \nSA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x418e32}, NULL, 8) = 0\nrt_sigaction(SIGRT_13, {0x418ddf, ~[], \nSA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x418e32}, NULL, 8) = 0\nrt_sigaction(SIGRT_14, {0x418ddf, ~[], \nSA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x418e32}, NULL, 8) = 0\nrt_sigaction(SIGRT_15, {0x418ddf, ~[], \nSA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x418e32}, NULL, 8) = 0\nrt_sigaction(SIGRT_16, {0x418ddf, ~[], \nSA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x418e32}, NULL, 8) = 0\nrt_sigaction(SIGRT_17, {0x418ddf, ~[], \nSA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x418e32}, NULL, 8) = 0\nrt_sigaction(SIGRT_18, {0x418ddf, ~[], \nSA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x418e32}, NULL, 8) = 0\nrt_sigaction(SIGRT_19, {0x418ddf, ~[], \nSA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x418e32}, NULL, 8) = 0\nrt_sigaction(SIGRT_20, {0x418ddf, ~[], \nSA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x418e32}, NULL, 8) = 0\nrt_sigaction(SIGRT_21, {0x418ddf, ~[], \nSA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x418e32}, NULL, 8) = 0\nrt_sigaction(SIGRT_22, {0x418ddf, ~[], \nSA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x418e32}, NULL, 8) = 0\nrt_sigaction(SIGRT_23, {0x418ddf, ~[], \nSA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x418e32}, NULL, 8) = 0\nrt_sigaction(SIGRT_24, {0x418ddf, ~[], \nSA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x418e32}, NULL, 8) = 0\nrt_sigaction(SIGRT_25, {0x418ddf, ~[], \nSA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x418e32}, NULL, 8) = 0\nrt_sigaction(SIGRT_26, {0x418ddf, ~[], \nSA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x418e32}, NULL, 8) = 0\nrt_sigaction(SIGRT_27, {0x418ddf, ~[], \nSA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x418e32}, NULL, 8) = 0\nrt_sigaction(SIGRT_28, {0x418ddf, ~[], \nSA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x418e32}, NULL, 8) = 0\nrt_sigaction(SIGRT_29, {0x418ddf, ~[], \nSA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x418e32}, NULL, 8) = 0\nrt_sigaction(SIGRT_30, {0x418ddf, ~[], \nSA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x418e32}, NULL, 8) = 0\nrt_sigaction(SIGRT_31, {0x418ddf, ~[], \nSA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x418e32}, NULL, 8) = 0\nrt_sigaction(SIGRT_32, {0x418ddf, ~[], \nSA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x418e32}, NULL, 8) = 0\nopen(\"/proc/stat\", O_RDONLY|O_CLOEXEC) = 4\nread(4, \"cpu 26751446 35451 8248792 2083\"..., 252) = 252\nread(4, \"62474 84871592 0 0 0 25488807 0 \"..., 252) = 252\nread(4, \" 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0\"..., 252) = 252\nread(4, \" 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0\"..., 252) = 252\nread(4, \" 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0\"..., 252) = 252\nread(4, \" 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0\"..., 252) = 252\nread(4, \" 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0\"..., 252) = 252\nread(4, \"\\nprocs_blocked 0\\nsoftirq 3692063\"..., 252) = 108\nread(4, \"\", 252) = 0\nclose(4) = 0\nmmap(0xf800000000, 65536, PROT_NONE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = \n0xf800000000\nmunmap(0xf800000000, 65536) = 0\nmmap(NULL, 131072, PROT_READ|PROT_WRITE|PROT_EXEC, \nMAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0x7ff0f0af9000\nmmap(0xf840000000, 1048576, PROT_READ|PROT_WRITE|PROT_EXEC, \nMAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0xf840000000\nmmap(0xf83fff0000, 65536, PROT_READ|PROT_WRITE|PROT_EXEC, \nMAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0xf83fff0000\nmmap(NULL, 131072, PROT_READ|PROT_WRITE|PROT_EXEC, \nMAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0x7ff0f0ad9000\nmmap(NULL, 131072, PROT_READ|PROT_WRITE|PROT_EXEC, \nMAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0x7ff0f0ab9000\nsigaltstack({ss_sp=0xf840076000, ss_flags=0, ss_size=32768}, NULL) = 0\nmmap(NULL, 1048576, PROT_READ|PROT_WRITE|PROT_EXEC, \nMAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0x7ff0f09b9000\nsocket(PF_INET6, SOCK_STREAM, IPPROTO_TCP) = 4\nbind(4, {sa_family=AF_INET6, sin6_port=htons(0), inet_pton(AF_INET6, \"::1\", \n&sin6_addr), sin6_flowinfo=0, sin6_scope_id=0}, 28) = 0\nsocket(PF_INET6, SOCK_STREAM, IPPROTO_TCP) = 5\nbind(5, {sa_family=AF_INET6, sin6_port=htons(0), inet_pton(AF_INET6, \n\"::ffff:127.0.0.1\", &sin6_addr), sin6_flowinfo=0, sin6_scope_id=0}, 28) = 0\nclose(5) = 0\nclose(4) = 0\nopen(\"/proc/sys/net/core/somaxconn\", O_RDONLY|O_CLOEXEC) = 4\nread(4, \"128\\n\", 1024) = 4\nread(4, \"\", 1020) = 0\nclose(4) = 0\ndup(3) = 4\ngetsockopt(4, SOL_SOCKET, SO_TYPE, [1], [4]) = 0\ngetsockname(4, {sa_family=AF_INET, sin_port=htons(51826), \nsin_addr=inet_addr(\"127.0.0.1\")}, [16]) = 0\ngetpeername(4, 0xf840000850, [112]) = -1 ENOTCONN (Transport endpoint is \nnot connected)\npipe([5, 6]) = 0\nfcntl(5, F_SETFD, FD_CLOEXEC) = 0\nfcntl(6, F_SETFD, FD_CLOEXEC) = 0\nfcntl(5, F_GETFL) = 0 (flags O_RDONLY)\nfcntl(5, F_SETFL, O_RDONLY|O_NONBLOCK) = 0\nfcntl(6, F_GETFL) = 0x1 (flags O_WRONLY)\nfcntl(6, F_SETFL, O_WRONLY|O_NONBLOCK) = 0\nepoll_create1(O_CLOEXEC) = 7\nepoll_ctl(7, EPOLL_CTL_ADD, 5, {EPOLLIN|0x2000, {u32=5, u64=5}}) = 0\nbrk(0) = 0x37d5000\nbrk(0x37f6000) = 0x37f6000\nmmap(NULL, 8392704, PROT_READ|PROT_WRITE, \nMAP_PRIVATE|MAP_ANONYMOUS|MAP_STACK, -1, 0) = 0x7ff0efb57000\nmprotect(0x7ff0efb57000, 4096, PROT_NONE) = 0\nclone(Process 18948 attached\nchild_stack=0x7ff0f0356fd0, \nflags=CLONE_VM|CLONE_FS|CLONE_FILES|CLONE_SIGHAND|CLONE_THREAD|CLONE_SYSVSEM|CLONE_SETTLS|CLONE_PARENT_SETTID|CLONE_CHILD_CLEARTID, \nparent_tidptr=0x7ff0f03579d0, tls=0x7ff0f0357700, \nchild_tidptr=0x7ff0f03579d0) = 18948\n[pid 18947] fcntl(4, F_GETFL) = 0x2 (flags O_RDWR)\n[pid 18947] futex(0x7a3130, FUTEX_WAIT, 0, NULL <unfinished ...>\n[pid 18948] set_robust_list(0x7ff0f03579e0, 0x18) = 0\n[pid 18948] sigaltstack({ss_sp=0xf8400ae000, ss_flags=0, ss_size=32768}, \nNULL) = 0\n[pid 18948] futex(0x7a3130, FUTEX_WAKE, 1 <unfinished ...>\n[pid 18947] <... futex resumed> ) = 0\n[pid 18947] fcntl(4, F_SETFL, O_RDWR|O_NONBLOCK) = 0\n[pid 18947] accept(4, {sa_family=AF_INET, sin_port=htons(55184), \nsin_addr=inet_addr(\"127.0.0.1\")}, [16]) = 8\n[pid 18947] fcntl(8, F_SETFD, FD_CLOEXEC) = 0\n[pid 18947] fcntl(8, F_GETFL) = 0x2 (flags O_RDWR)\n[pid 18947] fcntl(8, F_SETFL, O_RDWR|O_NONBLOCK) = 0\n[pid 18947] getsockname(8, {sa_family=AF_INET, sin_port=htons(51826), \nsin_addr=inet_addr(\"127.0.0.1\")}, [16]) = 0\n[pid 18947] setsockopt(8, SOL_TCP, TCP_NODELAY, [1], 4) = 0\n[pid 18947] mmap(NULL, 8392704, PROT_READ|PROT_WRITE, \nMAP_PRIVATE|MAP_ANONYMOUS|MAP_STACK, -1, 0) = 0x7ff0ef356000\n[pid 18947] mprotect(0x7ff0ef356000, 4096, PROT_NONE) = 0\n[pid 18947] clone(Process 18949 attached\nchild_stack=0x7ff0efb55fd0, \nflags=CLONE_VM|CLONE_FS|CLONE_FILES|CLONE_SIGHAND|CLONE_THREAD|CLONE_SYSVSEM|CLONE_SETTLS|CLONE_PARENT_SETTID|CLONE_CHILD_CLEARTID, \nparent_tidptr=0x7ff0efb569d0, tls=0x7ff0efb56700, \nchild_tidptr=0x7ff0efb569d0) = 18949\n[pid 18947] accept(4, 0xf8400009a0, [112]) = -1 EAGAIN (Resource \ntemporarily unavailable)\n[pid 18947] futex(0x7a3130, FUTEX_WAIT, 0, NULL <unfinished ...>\n[pid 18948] <... futex resumed> ) = 1\n[pid 18948] epoll_wait(7, <unfinished ...>\n[pid 18949] set_robust_list(0x7ff0efb569e0, 0x18) = 0\n[pid 18949] sigaltstack({ss_sp=0xf8400bc000, ss_flags=0, ss_size=32768}, \nNULL) = 0\n[pid 18949] futex(0x7a3130, FUTEX_WAKE, 1 <unfinished ...>\n[pid 18947] <... futex resumed> ) = 0\n[pid 18947] epoll_ctl(7, EPOLL_CTL_ADD, 4, {EPOLLIN|EPOLLONESHOT|0x2000, \n{u32=4, u64=4}}) = 0\n[pid 18947] futex(0x7a3130, FUTEX_WAIT, 0, NULL <unfinished ...>\n[pid 18949] <... futex resumed> ) = 1\n[pid 18949] read(8, \"GET / HTTP/1.1\\r\\nHost: 127.0.0.1:\"..., 4096) = 93\n[pid 18949] open(\"testdata\", O_RDONLY|O_CLOEXEC) = 9\n[pid 18949] fstat(9, {st_mode=S_IFDIR|0775, st_size=136, ...}) = 0\n[pid 18949] open(\"testdata/index.html\", O_RDONLY|O_CLOEXEC) = 10\n[pid 18949] fstat(10, {st_mode=S_IFREG|0664, st_size=22, ...}) = 0\n[pid 18949] open(\"/etc/mime.types\", O_RDONLY|O_CLOEXEC) = 11\n[pid 18949] read(11, \"################################\"..., 4096) = 4096\n[pid 18949] read(11, \"\\napplication/whoispp-response\\nap\"..., 4071) = 4071\n[pid 18949] read(11, \"lication/vnd.ms-asf\\napplication/\"..., 4093) = 4093\n[pid 18949] read(11, \"ml.draw.template\\t\\t\\t\\t\\t\\tstd\\napplic\"..., 4075) = \n4075\n[pid 18949] mmap(0xf840100000, 1048576, PROT_READ|PROT_WRITE|PROT_EXEC, \nMAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0xf840100000\n[pid 18949] mmap(0xf83ffe0000, 65536, PROT_READ|PROT_WRITE|PROT_EXEC, \nMAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0xf83ffe0000\n[pid 18949] read(11, \"lab\\t\\t\\t\\tsci sce\\napplication/x-sh\\t\"..., 4079) = \n4079\n[pid 18949] read(11, \"r\\nimage/x-coreldrawpattern\\t\\t\\tpat\"..., 4073) = 3544\n[pid 18949] read(11, \"\", 4096) = 0\n[pid 18949] close(11) = 0\n[pid 18949] open(\"/etc/apache2/mime.types\", O_RDONLY|O_CLOEXEC) = -1 ENOENT \n(No such file or directory)\n[pid 18949] open(\"/etc/apache/mime.types\", O_RDONLY|O_CLOEXEC) = -1 ENOENT \n(No such file or directory)\n[pid 18949] write(8, \"HTTP/1.1 200 OK\\r\\nAccept-Ranges: \"..., 184 \n<unfinished ...>\n[pid 18948] <... epoll_wait resumed> {{EPOLLIN, {u32=4, u64=4}}}, 10, -1) = \n1\n[pid 18948] epoll_ctl(7, EPOLL_CTL_DEL, 4, NULL) = 0\n[pid 18948] futex(0x7a3130, FUTEX_WAKE, 1) = 1\n[pid 18947] <... futex resumed> ) = 0\n[pid 18948] epoll_wait(7, <unfinished ...>\n[pid 18947] accept(4, {sa_family=AF_INET, sin_port=htons(55185), \nsin_addr=inet_addr(\"127.0.0.1\")}, [16]) = 11\n[pid 18947] fcntl(11, F_SETFD, FD_CLOEXEC) = 0\n[pid 18947] fcntl(11, F_GETFL) = 0x2 (flags O_RDWR)\n[pid 18947] fcntl(11, F_SETFL, O_RDWR|O_NONBLOCK) = 0\n[pid 18947] getsockname(11, {sa_family=AF_INET, sin_port=htons(51826), \nsin_addr=inet_addr(\"127.0.0.1\")}, [16]) = 0\n[pid 18947] setsockopt(11, SOL_TCP, TCP_NODELAY, [1], 4) = 0\n[pid 18947] mmap(NULL, 4096, PROT_READ|PROT_WRITE|PROT_EXEC, \nMAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0x7ff0f0b31000\n[pid 18947] mmap(NULL, 8392704, PROT_READ|PROT_WRITE, \nMAP_PRIVATE|MAP_ANONYMOUS|MAP_STACK, -1, 0) = 0x7ff0eeb55000\n[pid 18947] mprotect(0x7ff0eeb55000, 4096, PROT_NONE) = 0\n[pid 18947] clone(Process 18950 attached\nchild_stack=0x7ff0ef354fd0, \nflags=CLONE_VM|CLONE_FS|CLONE_FILES|CLONE_SIGHAND|CLONE_THREAD|CLONE_SYSVSEM|CLONE_SETTLS|CLONE_PARENT_SETTID|CLONE_CHILD_CLEARTID, \nparent_tidptr=0x7ff0ef3559d0, tls=0x7ff0ef355700, \nchild_tidptr=0x7ff0ef3559d0) = 18950\n[pid 18947] close(3) = 0\n[pid 18947] futex(0x7a3130, FUTEX_WAIT, 0, NULL <unfinished ...>\n[pid 18949] <... write resumed> ) = 184\n[pid 18949] futex(0xf8400ab368, FUTEX_WAIT, 0, NULL <unfinished ...>\n[pid 18950] set_robust_list(0x7ff0ef3559e0, 0x18) = 0\n[pid 18950] sigaltstack({ss_sp=0xf8400fa000, ss_flags=0, ss_size=32768}, \nNULL) = 0\n[pid 18950] mmap(NULL, 131072, PROT_READ|PROT_WRITE|PROT_EXEC, \nMAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0x7ff0f0999000\n[pid 18950] futex(0xf8400ab368, FUTEX_WAKE, 1 <unfinished ...>\n[pid 18949] <... futex resumed> ) = 0\n[pid 18949] futex(0x7a3130, FUTEX_WAKE, 1 <unfinished ...>\n[pid 18947] <... futex resumed> ) = 0\n[pid 18947] read(11, \"GET /quit HTTP/1.1\\r\\nHost: 127.0.\"..., 4096) = 97\n[pid 18947] exit_group(0) = ?\nFAIL\nFAIL net/http 2.837s\nok net/http/cgi 0.324s\nok net/http/fcgi 0.012s\n",
			"disapproval": false,
			"date": "2012-02-15 01:21:01.723699",
			"approval": false
		},
		{
			"sender": "bradfitz@golang.org",
			"recipients": [
				"bradfitz@golang.org",
				"golang-dev@googlegroups.com",
				"golang-dev@googlegroups.com",
				"reply@codereview-hr.appspotmail.com"
			],
			"text": "Hello golang-dev@googlegroups.com (cc: golang-dev@googlegroups.com),\n\nI'd like you to review this change to\nhttps://go.googlecode.com/hg/",
			"disapproval": false,
			"date": "2012-02-14 23:36:46.509200",
			"approval": false
		}
	],
	"owner_email": "bradfitz@golang.org",
	"private": false,
	"base_url": "",
	"owner": "bradfitz",
	"subject": "code review 5675050: net/http: make strace test more robust",
	"created": "2012-02-14 23:36:08.749760",
	"patchsets": [
		1,
		2001,
		3001,
		6001
	],
	"modified": "2012-02-15 08:42:20.841799",
	"closed": true,
	"issue": 5675050
}