{
	"description": "cmd/go: proper rebuild of affected packages during go test\n\nWith this CL, go test -short -cover std successfully builds and\nruns all the standard package tests. The tests that look a file\nline numbers (log and runtime/debug) fail, because cover is\nnot inserting //line directives. Everything else passes.\n\nok  \tcmd/api\t0.038s\tcoverage: 66.6% of statements\n?   \tcmd/cgo\t[no test files]\nok  \tcmd/fix\t0.043s\tcoverage: 27.2% of statements\nok  \tcmd/go\t0.063s\tcoverage: 2.4% of statements\n?   \tcmd/godoc\t[no test files]\nok  \tcmd/gofmt\t0.085s\tcoverage: 61.3% of statements\n?   \tcmd/yacc\t[no test files]\nok  \tarchive/tar\t0.023s\tcoverage: 74.2% of statements\nok  \tarchive/zip\t0.075s\tcoverage: 71.8% of statements\nok  \tbufio\t0.149s\tcoverage: 88.2% of statements\nok  \tbytes\t0.135s\tcoverage: 90.4% of statements\nok  \tcompress/bzip2\t0.087s\tcoverage: 85.1% of statements\nok  \tcompress/flate\t0.632s\tcoverage: 79.3% of statements\nok  \tcompress/gzip\t0.027s\tcoverage: 76.7% of statements\nok  \tcompress/lzw\t0.141s\tcoverage: 71.2% of statements\nok  \tcompress/zlib\t1.123s\tcoverage: 77.2% of statements\nok  \tcontainer/heap\t0.020s\tcoverage: 85.8% of statements\nok  \tcontainer/list\t0.021s\tcoverage: 92.5% of statements\nok  \tcontainer/ring\t0.030s\tcoverage: 86.5% of statements\n?   \tcrypto\t[no test files]\nok  \tcrypto/aes\t0.054s\tcoverage: 54.3% of statements\nok  \tcrypto/cipher\t0.027s\tcoverage: 68.8% of statements\nok  \tcrypto/des\t0.041s\tcoverage: 83.8% of statements\nok  \tcrypto/dsa\t0.027s\tcoverage: 33.1% of statements\nok  \tcrypto/ecdsa\t0.048s\tcoverage: 48.7% of statements\nok  \tcrypto/elliptic\t0.030s\tcoverage: 91.6% of statements\nok  \tcrypto/hmac\t0.019s\tcoverage: 83.3% of statements\nok  \tcrypto/md5\t0.020s\tcoverage: 78.7% of statements\nok  \tcrypto/rand\t0.057s\tcoverage: 20.8% of statements\nok  \tcrypto/rc4\t0.092s\tcoverage: 70.8% of statements\nok  \tcrypto/rsa\t0.261s\tcoverage: 80.8% of statements\nok  \tcrypto/sha1\t0.019s\tcoverage: 83.9% of statements\nok  \tcrypto/sha256\t0.021s\tcoverage: 89.0% of statements\nok  \tcrypto/sha512\t0.023s\tcoverage: 88.7% of statements\nok  \tcrypto/subtle\t0.027s\tcoverage: 83.9% of statements\nok  \tcrypto/tls\t0.833s\tcoverage: 79.7% of statements\nok  \tcrypto/x509\t0.961s\tcoverage: 74.9% of statements\n?   \tcrypto/x509/pkix\t[no test files]\nok  \tdatabase/sql\t0.033s\tcoverage: 75.0% of statements\nok  \tdatabase/sql/driver\t0.020s\tcoverage: 46.2% of statements\nok  \tdebug/dwarf\t0.023s\tcoverage: 71.5% of statements\nok  \tdebug/elf\t0.035s\tcoverage: 58.2% of statements\nok  \tdebug/gosym\t0.022s\tcoverage: 1.8% of statements\nok  \tdebug/macho\t0.023s\tcoverage: 63.7% of statements\nok  \tdebug/pe\t0.024s\tcoverage: 50.5% of statements\nok  \tencoding/ascii85\t0.021s\tcoverage: 89.7% of statements\nok  \tencoding/asn1\t0.022s\tcoverage: 77.9% of statements\nok  \tencoding/base32\t0.022s\tcoverage: 91.4% of statements\nok  \tencoding/base64\t0.020s\tcoverage: 90.7% of statements\nok  \tencoding/binary\t0.022s\tcoverage: 66.2% of statements\nok  \tencoding/csv\t0.022s\tcoverage: 88.5% of statements\nok  \tencoding/gob\t0.064s\tcoverage: 82.2% of statements\nok  \tencoding/hex\t0.019s\tcoverage: 86.3% of statements\nok  \tencoding/json\t0.047s\tcoverage: 77.3% of statements\nok  \tencoding/pem\t0.026s\tcoverage: 80.5% of statements\nok  \tencoding/xml\t0.039s\tcoverage: 85.0% of statements\nok  \terrors\t0.022s\tcoverage: 100.0% of statements\nok  \texpvar\t0.048s\tcoverage: 72.0% of statements\nok  \tflag\t0.019s\tcoverage: 86.9% of statements\nok  \tfmt\t0.062s\tcoverage: 91.2% of statements\nok  \tgo/ast\t0.028s\tcoverage: 46.3% of statements\nok  \tgo/build\t0.190s\tcoverage: 75.4% of statements\nok  \tgo/doc\t0.095s\tcoverage: 76.7% of statements\nok  \tgo/format\t0.036s\tcoverage: 79.8% of statements\nok  \tgo/parser\t0.075s\tcoverage: 82.0% of statements\nok  \tgo/printer\t0.733s\tcoverage: 88.6% of statements\nok  \tgo/scanner\t0.031s\tcoverage: 86.5% of statements\nok  \tgo/token\t0.062s\tcoverage: 79.7% of statements\n?   \thash\t[no test files]\nok  \thash/adler32\t0.029s\tcoverage: 49.0% of statements\nok  \thash/crc32\t0.020s\tcoverage: 64.2% of statements\nok  \thash/crc64\t0.021s\tcoverage: 53.5% of statements\nok  \thash/fnv\t0.018s\tcoverage: 75.5% of statements\nok  \thtml\t0.022s\tcoverage: 4.5% of statements\nok  \thtml/template\t0.087s\tcoverage: 83.9% of statements\nok  \timage\t0.108s\tcoverage: 67.1% of statements\nok  \timage/color\t0.026s\tcoverage: 20.1% of statements\nok  \timage/draw\t0.049s\tcoverage: 69.6% of statements\nok  \timage/gif\t0.019s\tcoverage: 65.2% of statements\nok  \timage/jpeg\t0.197s\tcoverage: 78.6% of statements\nok  \timage/png\t0.055s\tcoverage: 56.5% of statements\nok  \tindex/suffixarray\t0.027s\tcoverage: 82.4% of statements\nok  \tio\t0.037s\tcoverage: 83.4% of statements\nok  \tio/ioutil\t0.022s\tcoverage: 70.1% of statements\nFAIL\tlog\t0.020s\nok  \tlog/syslog\t2.063s\tcoverage: 71.1% of statements\nok  \tmath\t0.023s\tcoverage: 76.5% of statements\nok  \tmath/big\t0.235s\tcoverage: 79.2% of statements\nok  \tmath/cmplx\t0.020s\tcoverage: 66.5% of statements\nok  \tmath/rand\t0.031s\tcoverage: 69.9% of statements\nok  \tmime\t0.022s\tcoverage: 83.0% of statements\nok  \tmime/multipart\t0.389s\tcoverage: 76.1% of statements\nok  \tnet\t2.219s\tcoverage: 58.0% of statements\nok  \tnet/http\t4.744s\tcoverage: 82.9% of statements\nok  \tnet/http/cgi\t0.593s\tcoverage: 68.5% of statements\nok  \tnet/http/cookiejar\t0.038s\tcoverage: 90.3% of statements\nok  \tnet/http/fcgi\t0.047s\tcoverage: 37.6% of statements\nok  \tnet/http/httptest\t0.068s\tcoverage: 68.9% of statements\nok  \tnet/http/httputil\t0.058s\tcoverage: 52.8% of statements\n?   \tnet/http/pprof\t[no test files]\nok  \tnet/mail\t0.025s\tcoverage: 80.3% of statements\nok  \tnet/rpc\t0.063s\tcoverage: 71.5% of statements\nok  \tnet/rpc/jsonrpc\t0.047s\tcoverage: 81.3% of statements\nok  \tnet/smtp\t0.032s\tcoverage: 74.1% of statements\nok  \tnet/textproto\t0.023s\tcoverage: 66.0% of statements\nok  \tnet/url\t0.020s\tcoverage: 78.2% of statements\nok  \tos\t4.729s\tcoverage: 73.3% of statements\nok  \tos/exec\t39.620s\tcoverage: 65.1% of statements\nok  \tos/signal\t0.541s\tcoverage: 89.9% of statements\nok  \tos/user\t0.022s\tcoverage: 62.2% of statements\nok  \tpath\t0.018s\tcoverage: 90.8% of statements\nok  \tpath/filepath\t10.834s\tcoverage: 88.4% of statements\nok  \treflect\t0.055s\tcoverage: 83.2% of statements\nok  \tregexp\t0.084s\tcoverage: 75.5% of statements\nok  \tregexp/syntax\t0.547s\tcoverage: 85.2% of statements\nok  \truntime\t4.755s\tcoverage: 75.9% of statements\n?   \truntime/cgo\t[no test files]\nFAIL\truntime/debug\t0.018s\nok  \truntime/pprof\t0.368s\tcoverage: 8.5% of statements\n?   \truntime/race\t[no test files]\nok  \tsort\t0.059s\tcoverage: 97.7% of statements\nok  \tstrconv\t0.315s\tcoverage: 95.6% of statements\nok  \tstrings\t0.147s\tcoverage: 96.1% of statements\nok  \tsync\t0.083s\tcoverage: 56.7% of statements\nok  \tsync/atomic\t0.035s\tcoverage: 0.0% of statements\nok  \tsyscall\t0.043s\tcoverage: 24.0% of statements\nok  \ttesting\t0.018s\tcoverage: 24.0% of statements\n?   \ttesting/iotest\t[no test files]\nok  \ttesting/quick\t0.062s\tcoverage: 83.2% of statements\nok  \ttext/scanner\t0.020s\tcoverage: 91.5% of statements\nok  \ttext/tabwriter\t0.021s\tcoverage: 90.4% of statements\nok  \ttext/template\t0.052s\tcoverage: 81.1% of statements\nok  \ttext/template/parse\t0.024s\tcoverage: 86.1% of statements\nok  \ttime\t2.431s\tcoverage: 88.8% of statements\nok  \tunicode\t0.024s\tcoverage: 92.1% of statements\nok  \tunicode/utf16\t0.017s\tcoverage: 97.3% of statements\nok  \tunicode/utf8\t0.019s\tcoverage: 97.4% of statements\n?   \tunsafe\t[no test files]",
	"cc": [
		"golang-dev@googlegroups.com",
		"r@golang.org"
	],
	"reviewers": [],
	"messages": [
		{
			"sender": "rsc@golang.org",
			"recipients": [
				"rsc@golang.org",
				"golang-dev@googlegroups.com",
				"reply@codereview-hr.appspotmail.com"
			],
			"text": "Hello golang-dev@googlegroups.com,\n\nI'd like you to review this change to\nhttps://code.google.com/p/go/",
			"disapproval": false,
			"date": "2013-06-26 04:25:44.899160",
			"approval": false
		},
		{
			"sender": "r@golang.org",
			"recipients": [
				"rsc@golang.org",
				"golang-dev@googlegroups.com",
				"r@golang.org",
				"reply@codereview-hr.appspotmail.com"
			],
			"text": "LGTM\n\nnow if only we had tests for this....\n\nremaining TODO: turn cover on for a general build, e.g. do the tests for text/template cover text/template/parse.\n\nhttps://codereview.appspot.com/10586043/diff/7001/src/cmd/go/test.go\nFile src/cmd/go/test.go (right):\n\nhttps://codereview.appspot.com/10586043/diff/7001/src/cmd/go/test.go#newcode623\nsrc/cmd/go/test.go:623: // such that the test depends on q and q depends on p.\nq and q? oh i see - comma please\n\ntest depends on q, and q depends on p.",
			"disapproval": false,
			"date": "2013-06-26 05:06:25.130250",
			"approval": true
		},
		{
			"sender": "rsc@golang.org",
			"recipients": [
				"rsc@golang.org",
				"golang-dev@googlegroups.com",
				"r@golang.org",
				"reply@codereview-hr.appspotmail.com"
			],
			"text": "*** Submitted as https://code.google.com/p/go/source/detail?r=2aa1e39979fa ***\n\ncmd/go: proper rebuild of affected packages during go test\n\nWith this CL, go test -short -cover std successfully builds and\nruns all the standard package tests. The tests that look a file\nline numbers (log and runtime/debug) fail, because cover is\nnot inserting //line directives. Everything else passes.\n\nok  \tcmd/api\t0.038s\tcoverage: 66.6% of statements\n?   \tcmd/cgo\t[no test files]\nok  \tcmd/fix\t0.043s\tcoverage: 27.2% of statements\nok  \tcmd/go\t0.063s\tcoverage: 2.4% of statements\n?   \tcmd/godoc\t[no test files]\nok  \tcmd/gofmt\t0.085s\tcoverage: 61.3% of statements\n?   \tcmd/yacc\t[no test files]\nok  \tarchive/tar\t0.023s\tcoverage: 74.2% of statements\nok  \tarchive/zip\t0.075s\tcoverage: 71.8% of statements\nok  \tbufio\t0.149s\tcoverage: 88.2% of statements\nok  \tbytes\t0.135s\tcoverage: 90.4% of statements\nok  \tcompress/bzip2\t0.087s\tcoverage: 85.1% of statements\nok  \tcompress/flate\t0.632s\tcoverage: 79.3% of statements\nok  \tcompress/gzip\t0.027s\tcoverage: 76.7% of statements\nok  \tcompress/lzw\t0.141s\tcoverage: 71.2% of statements\nok  \tcompress/zlib\t1.123s\tcoverage: 77.2% of statements\nok  \tcontainer/heap\t0.020s\tcoverage: 85.8% of statements\nok  \tcontainer/list\t0.021s\tcoverage: 92.5% of statements\nok  \tcontainer/ring\t0.030s\tcoverage: 86.5% of statements\n?   \tcrypto\t[no test files]\nok  \tcrypto/aes\t0.054s\tcoverage: 54.3% of statements\nok  \tcrypto/cipher\t0.027s\tcoverage: 68.8% of statements\nok  \tcrypto/des\t0.041s\tcoverage: 83.8% of statements\nok  \tcrypto/dsa\t0.027s\tcoverage: 33.1% of statements\nok  \tcrypto/ecdsa\t0.048s\tcoverage: 48.7% of statements\nok  \tcrypto/elliptic\t0.030s\tcoverage: 91.6% of statements\nok  \tcrypto/hmac\t0.019s\tcoverage: 83.3% of statements\nok  \tcrypto/md5\t0.020s\tcoverage: 78.7% of statements\nok  \tcrypto/rand\t0.057s\tcoverage: 20.8% of statements\nok  \tcrypto/rc4\t0.092s\tcoverage: 70.8% of statements\nok  \tcrypto/rsa\t0.261s\tcoverage: 80.8% of statements\nok  \tcrypto/sha1\t0.019s\tcoverage: 83.9% of statements\nok  \tcrypto/sha256\t0.021s\tcoverage: 89.0% of statements\nok  \tcrypto/sha512\t0.023s\tcoverage: 88.7% of statements\nok  \tcrypto/subtle\t0.027s\tcoverage: 83.9% of statements\nok  \tcrypto/tls\t0.833s\tcoverage: 79.7% of statements\nok  \tcrypto/x509\t0.961s\tcoverage: 74.9% of statements\n?   \tcrypto/x509/pkix\t[no test files]\nok  \tdatabase/sql\t0.033s\tcoverage: 75.0% of statements\nok  \tdatabase/sql/driver\t0.020s\tcoverage: 46.2% of statements\nok  \tdebug/dwarf\t0.023s\tcoverage: 71.5% of statements\nok  \tdebug/elf\t0.035s\tcoverage: 58.2% of statements\nok  \tdebug/gosym\t0.022s\tcoverage: 1.8% of statements\nok  \tdebug/macho\t0.023s\tcoverage: 63.7% of statements\nok  \tdebug/pe\t0.024s\tcoverage: 50.5% of statements\nok  \tencoding/ascii85\t0.021s\tcoverage: 89.7% of statements\nok  \tencoding/asn1\t0.022s\tcoverage: 77.9% of statements\nok  \tencoding/base32\t0.022s\tcoverage: 91.4% of statements\nok  \tencoding/base64\t0.020s\tcoverage: 90.7% of statements\nok  \tencoding/binary\t0.022s\tcoverage: 66.2% of statements\nok  \tencoding/csv\t0.022s\tcoverage: 88.5% of statements\nok  \tencoding/gob\t0.064s\tcoverage: 82.2% of statements\nok  \tencoding/hex\t0.019s\tcoverage: 86.3% of statements\nok  \tencoding/json\t0.047s\tcoverage: 77.3% of statements\nok  \tencoding/pem\t0.026s\tcoverage: 80.5% of statements\nok  \tencoding/xml\t0.039s\tcoverage: 85.0% of statements\nok  \terrors\t0.022s\tcoverage: 100.0% of statements\nok  \texpvar\t0.048s\tcoverage: 72.0% of statements\nok  \tflag\t0.019s\tcoverage: 86.9% of statements\nok  \tfmt\t0.062s\tcoverage: 91.2% of statements\nok  \tgo/ast\t0.028s\tcoverage: 46.3% of statements\nok  \tgo/build\t0.190s\tcoverage: 75.4% of statements\nok  \tgo/doc\t0.095s\tcoverage: 76.7% of statements\nok  \tgo/format\t0.036s\tcoverage: 79.8% of statements\nok  \tgo/parser\t0.075s\tcoverage: 82.0% of statements\nok  \tgo/printer\t0.733s\tcoverage: 88.6% of statements\nok  \tgo/scanner\t0.031s\tcoverage: 86.5% of statements\nok  \tgo/token\t0.062s\tcoverage: 79.7% of statements\n?   \thash\t[no test files]\nok  \thash/adler32\t0.029s\tcoverage: 49.0% of statements\nok  \thash/crc32\t0.020s\tcoverage: 64.2% of statements\nok  \thash/crc64\t0.021s\tcoverage: 53.5% of statements\nok  \thash/fnv\t0.018s\tcoverage: 75.5% of statements\nok  \thtml\t0.022s\tcoverage: 4.5% of statements\nok  \thtml/template\t0.087s\tcoverage: 83.9% of statements\nok  \timage\t0.108s\tcoverage: 67.1% of statements\nok  \timage/color\t0.026s\tcoverage: 20.1% of statements\nok  \timage/draw\t0.049s\tcoverage: 69.6% of statements\nok  \timage/gif\t0.019s\tcoverage: 65.2% of statements\nok  \timage/jpeg\t0.197s\tcoverage: 78.6% of statements\nok  \timage/png\t0.055s\tcoverage: 56.5% of statements\nok  \tindex/suffixarray\t0.027s\tcoverage: 82.4% of statements\nok  \tio\t0.037s\tcoverage: 83.4% of statements\nok  \tio/ioutil\t0.022s\tcoverage: 70.1% of statements\nFAIL\tlog\t0.020s\nok  \tlog/syslog\t2.063s\tcoverage: 71.1% of statements\nok  \tmath\t0.023s\tcoverage: 76.5% of statements\nok  \tmath/big\t0.235s\tcoverage: 79.2% of statements\nok  \tmath/cmplx\t0.020s\tcoverage: 66.5% of statements\nok  \tmath/rand\t0.031s\tcoverage: 69.9% of statements\nok  \tmime\t0.022s\tcoverage: 83.0% of statements\nok  \tmime/multipart\t0.389s\tcoverage: 76.1% of statements\nok  \tnet\t2.219s\tcoverage: 58.0% of statements\nok  \tnet/http\t4.744s\tcoverage: 82.9% of statements\nok  \tnet/http/cgi\t0.593s\tcoverage: 68.5% of statements\nok  \tnet/http/cookiejar\t0.038s\tcoverage: 90.3% of statements\nok  \tnet/http/fcgi\t0.047s\tcoverage: 37.6% of statements\nok  \tnet/http/httptest\t0.068s\tcoverage: 68.9% of statements\nok  \tnet/http/httputil\t0.058s\tcoverage: 52.8% of statements\n?   \tnet/http/pprof\t[no test files]\nok  \tnet/mail\t0.025s\tcoverage: 80.3% of statements\nok  \tnet/rpc\t0.063s\tcoverage: 71.5% of statements\nok  \tnet/rpc/jsonrpc\t0.047s\tcoverage: 81.3% of statements\nok  \tnet/smtp\t0.032s\tcoverage: 74.1% of statements\nok  \tnet/textproto\t0.023s\tcoverage: 66.0% of statements\nok  \tnet/url\t0.020s\tcoverage: 78.2% of statements\nok  \tos\t4.729s\tcoverage: 73.3% of statements\nok  \tos/exec\t39.620s\tcoverage: 65.1% of statements\nok  \tos/signal\t0.541s\tcoverage: 89.9% of statements\nok  \tos/user\t0.022s\tcoverage: 62.2% of statements\nok  \tpath\t0.018s\tcoverage: 90.8% of statements\nok  \tpath/filepath\t10.834s\tcoverage: 88.4% of statements\nok  \treflect\t0.055s\tcoverage: 83.2% of statements\nok  \tregexp\t0.084s\tcoverage: 75.5% of statements\nok  \tregexp/syntax\t0.547s\tcoverage: 85.2% of statements\nok  \truntime\t4.755s\tcoverage: 75.9% of statements\n?   \truntime/cgo\t[no test files]\nFAIL\truntime/debug\t0.018s\nok  \truntime/pprof\t0.368s\tcoverage: 8.5% of statements\n?   \truntime/race\t[no test files]\nok  \tsort\t0.059s\tcoverage: 97.7% of statements\nok  \tstrconv\t0.315s\tcoverage: 95.6% of statements\nok  \tstrings\t0.147s\tcoverage: 96.1% of statements\nok  \tsync\t0.083s\tcoverage: 56.7% of statements\nok  \tsync/atomic\t0.035s\tcoverage: 0.0% of statements\nok  \tsyscall\t0.043s\tcoverage: 24.0% of statements\nok  \ttesting\t0.018s\tcoverage: 24.0% of statements\n?   \ttesting/iotest\t[no test files]\nok  \ttesting/quick\t0.062s\tcoverage: 83.2% of statements\nok  \ttext/scanner\t0.020s\tcoverage: 91.5% of statements\nok  \ttext/tabwriter\t0.021s\tcoverage: 90.4% of statements\nok  \ttext/template\t0.052s\tcoverage: 81.1% of statements\nok  \ttext/template/parse\t0.024s\tcoverage: 86.1% of statements\nok  \ttime\t2.431s\tcoverage: 88.8% of statements\nok  \tunicode\t0.024s\tcoverage: 92.1% of statements\nok  \tunicode/utf16\t0.017s\tcoverage: 97.3% of statements\nok  \tunicode/utf8\t0.019s\tcoverage: 97.4% of statements\n?   \tunsafe\t[no test files]\n\nR=golang-dev, r\nCC=golang-dev\nhttps://codereview.appspot.com/10586043",
			"disapproval": false,
			"date": "2013-06-26 18:31:16.482480",
			"approval": false
		}
	],
	"owner_email": "rsc@golang.org",
	"private": false,
	"base_url": "",
	"owner": "rsc",
	"subject": "code review 10586043: cmd/go: proper rebuild of affected packages during go test",
	"created": "2013-06-26 02:32:50.569310",
	"patchsets": [
		1,
		3001,
		7001,
		11001
	],
	"modified": "2013-06-26 18:31:18.477920",
	"closed": true,
	"issue": 10586043
}